(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{321:function(s,t,a){"use strict";a.r(t);var n=a(12),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"微信小程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#微信小程序"}},[s._v("#")]),s._v(" 微信小程序")]),s._v(" "),t("blockquote",[t("p",[s._v("资料："),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/",target:"_blank",rel:"noopener noreferrer"}},[s._v("微信官方文档-小程序"),t("OutboundLink")],1)])]),s._v(" "),t("h2",{attrs:{id:"_1、简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、简介"}},[s._v("#")]),s._v(" 1、简介")]),s._v(" "),t("p",[s._v("灰度更新和线上版本回退功能：按客户等维度发布")]),s._v(" "),t("ul",[t("li",[s._v("双线程架构：视图线程和逻辑线程，两线程通过WeixinJSBridge与native通信")]),s._v(" "),t("li",[s._v("WXS(视图线程，不能调用js\\WXML\\WCSS\\js(setData),初始化数据使用setData，后续不于后台交互使用wxs")]),s._v(" "),t("li",[s._v("视图组件和原生组件：原生组件放在视图组件上方")])]),s._v(" "),t("h2",{attrs:{id:"_2、组件解析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、组件解析"}},[s._v("#")]),s._v(" 2、组件解析")]),s._v(" "),t("h3",{attrs:{id:"_1、web-view组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、web-view组件"}},[s._v("#")]),s._v(" 1、web-view组件")]),s._v(" "),t("ul",[t("li",[s._v("限定企业账户使用，需设置业务域名，域名下的h5页面才可正常使用。")]),s._v(" "),t("li",[s._v("web-view组件和小程序隔离，只能通过url传递参数。")]),s._v(" "),t("li",[s._v("无法使用原生组件覆盖，使用js-sdk在H5页面实现功能。")])]),s._v(" "),t("h4",{attrs:{id:"_1、判断是否在小程序环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、判断是否在小程序环境"}},[s._v("#")]),s._v(" 1、判断是否在小程序环境")]),s._v(" "),t("ul",[t("li",[s._v("js-sdk")]),s._v(" "),t("li",[s._v("localStorage塞入取出变量")]),s._v(" "),t("li",[s._v("判断user-agent")])]),s._v(" "),t("h4",{attrs:{id:"_2、鉴权方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、鉴权方式"}},[s._v("#")]),s._v(" 2、鉴权方式")]),s._v(" "),t("ul",[t("li",[s._v("HTTP Basic Authentication")]),s._v(" "),t("li",[s._v("session-cookie（后端/灰度）")]),s._v(" "),t("li",[s._v("token(JWT)")]),s._v(" "),t("li",[s._v("OAuth（一键登录）")])]),s._v(" "),t("p",[s._v("wx.login\\wx.checkSession\\wx.request")]),s._v(" "),t("h4",{attrs:{id:"_3、h5与小程序通信"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、h5与小程序通信"}},[s._v("#")]),s._v(" 3、h5与小程序通信")]),s._v(" "),t("p",[s._v("h5：postMessage发送消息")]),s._v(" "),t("p",[s._v("小程序：wx.miniProgram.postMessage获取信息")]),s._v(" "),t("h4",{attrs:{id:"_4、调试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、调试"}},[s._v("#")]),s._v(" 4、调试")]),s._v(" "),t("p",[s._v("开发工具可使用调试工具")]),s._v(" "),t("p",[s._v("手机：vConsole")]),s._v(" "),t("h2",{attrs:{id:"_3、双重登录态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、双重登录态"}},[s._v("#")]),s._v(" 3、双重登录态")]),s._v(" "),t("h3",{attrs:{id:"_1、三种状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、三种状态"}},[s._v("#")]),s._v(" 1、三种状态")]),s._v(" "),t("p",[s._v("访客态、游客态、会员态")]),s._v(" "),t("ul",[t("li",[s._v("访客态：未授权用户信息，未静默登录")]),s._v(" "),t("li",[s._v("游客态：授权用户信息，进行静默登录")]),s._v(" "),t("li",[s._v("会员态：授权手机号或使用账号密码登录，使用手机号进行账号关联")])]),s._v(" "),t("h3",{attrs:{id:"_2、静默登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、静默登录"}},[s._v("#")]),s._v(" 2、静默登录")]),s._v(" "),t("h4",{attrs:{id:"_1、登录流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、登录流程"}},[s._v("#")]),s._v(" 1、登录流程")]),s._v(" "),t("p",[s._v("利用小程序登录机制，实现静默登录，对客户无感。")]),s._v(" "),t("img",{attrs:{src:"/img/minip-login.jpg"}}),s._v(" "),t("ul",[t("li",[t("p",[s._v("小程序：调用 wx.login() 获取临时登录凭证code ，并回传到开发者服务器。")]),s._v(" "),t("ul",[t("li",[s._v("code有效率期5min，短时间内多次获取code值不变，有缓存")])])]),s._v(" "),t("li",[t("p",[s._v("小程序：使用wx.request调用开发者服务器接口，上送code值。")])]),s._v(" "),t("li",[t("p",[s._v("开发者服务器：调用auth.code2Session接口进行登录请求，获取 "),t("strong",[s._v("用户唯一标识 OpenID")]),s._v(" 、 用户在微信开放平台帐号下的"),t("strong",[s._v("唯一标识UnionID")]),s._v("（若当前小程序已绑定到微信开放平台帐号） 和 "),t("strong",[s._v("会话密钥 session_key")]),s._v("。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("登录凭证校验接口："),t("code",[s._v("https://api.weixin.qq.com/sns/jscode2session")])])]),s._v(" "),t("li",[t("p",[s._v("上送：code + appid + appSecret")])]),s._v(" "),t("li",[t("p",[s._v("接收：openid + session_key + unionid")])]),s._v(" "),t("li",[t("p",[s._v("会话密钥 "),t("code",[s._v("session_key")]),s._v(" 是对用户数据进行加密签名的密钥。为了应用自身的数据安全，开发者服务器"),t("strong",[s._v("不应该把会话密钥下发到小程序，也不应该对外提供这个密钥")]),s._v("，code登录后会失效。")])])])]),s._v(" "),t("li",[t("p",[s._v("开发者服务器：使用openid + unionid + session_key建立登录态，使用token鉴权或session鉴权，返回token或者sessionid。")])]),s._v(" "),t("li",[t("p",[s._v("小程序：将鉴权信息token或sessionid存入storage中，后续调用接口时携带鉴权信息。")])]),s._v(" "),t("li",[t("p",[s._v("开发者服务器：根据上送鉴权信息，校验成功后，回传数据。")])])]),s._v(" "),t("h4",{attrs:{id:"_2、api解析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、api解析"}},[s._v("#")]),s._v(" 2、api解析")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("openid和unionid")]),s._v(" "),t("ul",[t("li",[s._v("openid\n"),t("ul",[t("li",[s._v("客户在某一应用下的唯一标识：同一平台，不同应用，编号不同")]),s._v(" "),t("li",[s._v("通过后台调用auth.code2Session登录凭证校验接口获取")])])]),s._v(" "),t("li",[s._v("unionid\n"),t("ul",[t("li",[s._v("客户在同一个微信开放平台下的唯一标识：同一平台，不同应用，编号相同")]),s._v(" "),t("li",[s._v("当前小程序已绑定到微信开放平台帐号可通过后台调用auth.code2Session接口获取")]),s._v(" "),t("li",[s._v("前期通过getUseInfo获取，目前可通过wx.login获取，接口隔离")])])])])]),s._v(" "),t("li",[t("p",[s._v("wx.getUserInfo")]),s._v(" "),t("ul",[t("li",[s._v("存量：获取用户信息，获取unionid")]),s._v(" "),t("li",[s._v("现状：匿名头像昵称、默认性别地区、加密后的身份认证")])])]),s._v(" "),t("li",[t("p",[s._v("wx.getUserProfile")]),s._v(" "),t("ul",[t("li",[s._v("弹出个人信息授权弹框")]),s._v(" "),t("li",[s._v("成功后获取用户信息、调用失败")])])]),s._v(" "),t("li",[t("p",[s._v("wx.login")]),s._v(" "),t("ul",[t("li",[s._v("获取code")]),s._v(" "),t("li",[s._v("获取unionid")])])])]),s._v(" "),t("h4",{attrs:{id:"_3、超时处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、超时处理"}},[s._v("#")]),s._v(" 3、超时处理")]),s._v(" "),t("ul",[t("li",[s._v("小程序到开发服务器认证超时：校验sessionkey，重新进行登录或重新发起请求")]),s._v(" "),t("li",[s._v("开发者服务器到wx服务器认证超时：重新发起请求")]),s._v(" "),t("li",[s._v("小程序到开发者服务器登录后交易超时：重新发送请求即可")])]),s._v(" "),t("p",[s._v("参考资料："),t("a",{attrs:{href:"https://www.cnblogs.com/wangsky/p/11023616.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("小程序的登录与静默续期"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"_3、用户登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、用户登录"}},[s._v("#")]),s._v(" 3、用户登录")]),s._v(" "),t("p",[s._v("操作具体业务，需要会员及用户体系时，添加用户登录流程，弹出登录弹框，通常使用微信一键登录或账号密码登录两种方式，一般使用手机号进行用户体系关联。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("微信一键登录：提示用户授权手机号使用，getPhoneNumber")]),s._v(" "),t("ul",[t("li",[s._v("授权使用手机号，则用手机号进行账号关联绑定，进行登录操作")]),s._v(" "),t("li",[s._v("未授权使用手机号，登录失败，跳转至登录弹框")])])]),s._v(" "),t("li",[t("p",[s._v("账号密码登录：使用账号和密码认证登录")]),s._v(" "),t("ul",[t("li",[s._v("登录成功后，进行账号关联绑定")]),s._v(" "),t("li",[s._v("登录失败返回登录弹框")])])])]),s._v(" "),t("h3",{attrs:{id:"_4、用户体系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、用户体系"}},[s._v("#")]),s._v(" 4、用户体系")]),s._v(" "),t("p",[s._v("账号saas系统中，同一账号关联：账号体系、套餐、动态权限等，同一账号查找不同属性。")]),s._v(" "),t("h2",{attrs:{id:"_4、支付宝小程序-微信小程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、支付宝小程序-微信小程序"}},[s._v("#")]),s._v(" 4、支付宝小程序 & 微信小程序")]),s._v(" "),t("h3",{attrs:{id:"_1、app-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、app-json"}},[s._v("#")]),s._v(" 1、app.json")]),s._v(" "),t("h4",{attrs:{id:"_1、小程序的通用设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、小程序的通用设置"}},[s._v("#")]),s._v(" 1、小程序的通用设置")]),s._v(" "),t("p",[s._v("状态栏、导航条、标题、窗口背景色")]),s._v(" "),t("ul",[t("li",[s._v("微信")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("window")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"backgroundTextStyle"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"light"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ……")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("支付宝")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("window")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"default"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"light"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ……")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"_2、tabbar"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、tabbar"}},[s._v("#")]),s._v(" 2、tabBar")]),s._v(" "),t("ul",[t("li",[s._v("区别")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("tabBar")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 支付宝")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("items")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 微信")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("list")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"_2、pages"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、pages"}},[s._v("#")]),s._v(" 2、pages")]),s._v(" "),t("h4",{attrs:{id:"_1、文件名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、文件名"}},[s._v("#")]),s._v(" 1、文件名")]),s._v(" "),t("ul",[t("li",[s._v("支付宝: axml + acss")]),s._v(" "),t("li",[s._v("微信： wxml + wxss")])]),s._v(" "),t("h4",{attrs:{id:"_2、视图页面axml、wxml"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、视图页面axml、wxml"}},[s._v("#")]),s._v(" 2、视图页面axml、wxml")]),s._v(" "),t("h5",{attrs:{id:"_1、事件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、事件"}},[s._v("#")]),s._v(" 1、事件")]),s._v(" "),t("ul",[t("li",[s._v("支付宝 onTap\\catchTap")]),s._v(" "),t("li",[s._v("微信 bindtap\\catchtouchstart")])]),s._v(" "),t("h5",{attrs:{id:"_2、列表的渲染"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、列表的渲染"}},[s._v("#")]),s._v(" 2、列表的渲染")]),s._v(" "),t("ul",[t("li",[s._v("支付宝")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("a")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{{list}}"')]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"item-{{index}}"')]),s._v(" index"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("微信")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("wx")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{{list}}"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("wx")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key"')]),s._v(" wx"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("item"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"item"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"_3、条件渲染"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、条件渲染"}},[s._v("#")]),s._v(" 3、条件渲染")]),s._v(" "),t("ul",[t("li",[s._v("支付宝")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("a")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("a")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("a")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("esleif\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("微信")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("wx")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("wx")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("wx")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("esleif\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"_3、组件的不同"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、组件的不同"}},[s._v("#")]),s._v(" 3、组件的不同")]),s._v(" "),t("h4",{attrs:{id:"_1、showtoast"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、showtoast"}},[s._v("#")]),s._v(" 1、showToast")]),s._v(" "),t("ul",[t("li",[s._v("支付宝")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showToast")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("微信")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  wx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showToast")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"_2、showloading"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、showloading"}},[s._v("#")]),s._v(" 2、showLoading")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showLoading")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("微信")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  wx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("showLoading")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"_3、request网络请求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、request网络请求"}},[s._v("#")]),s._v(" 3、request网络请求")]),s._v(" "),t("ul",[t("li",[s._v("支付宝")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("httpRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("url")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("method")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("header")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("dataType")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("success")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("fail")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ul",[t("li",[s._v("微信")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("wx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("request")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("url")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("method")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("header")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("dataType")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("success")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("fail")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h4",{attrs:{id:"_4、支付"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、支付"}},[s._v("#")]),s._v(" 4、支付")]),s._v(" "),t("ul",[t("li",[s._v("支付宝")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tradePay")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("tradeNO")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'47983279478923797057247185'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("success")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("res")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("fail")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("res")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("微信")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  wx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("requstPayment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pre_pay_id'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("signType")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MD5'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("paySign")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("success")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("res")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("fail")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("res")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h4",{attrs:{id:"_5、获取code"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、获取code"}},[s._v("#")]),s._v(" 5、获取code")]),s._v(" "),t("ul",[t("li",[s._v("支付宝")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAuthCode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("success")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("微信")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("wx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("login")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("success")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"_5、微信小程序问题汇总"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、微信小程序问题汇总"}},[s._v("#")]),s._v(" 5、微信小程序问题汇总")]),s._v(" "),t("ol",[t("li",[s._v("自定义tabbar在页面存在下拉更新（scrollview）的时候，页面被下拉，tabbar也会跟着下拉。")])]),s._v(" "),t("ul",[t("li",[s._v("提前沟通，修改为原生tabbar")])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("require在小程序中不支持绝对路径，只能用相对路径去选取'../../../utils/tool.js'")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//app.js  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("App")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("$uri")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("$url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//comp.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" Api "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utils/tool.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//利用require返回uri带上/")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("组件引用资源路径不能解析特殊字符或汉字")])]),s._v(" "),t("ul",[t("li",[s._v("规范文件命名")])]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[s._v("{{}}模板中不能执行特殊方法，只能处理简单的四则运算")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//期望:'34万元'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" money "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("345678")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("view"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" money "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("view"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("方案 利用wxs的format\nvue "+s._s(s._f("moneyFilter")(s.money))+"\nwxs 实现format")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("fnToFixed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("num")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" num"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("toFixed")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  fnToFixed\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("wxs src"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../../../xxx.wxs'")]),s._v(" module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"filters"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("view"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" filters"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fnToFixed")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("money"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("view"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("wxs无法使用new Date()")])]),s._v(" "),t("ul",[t("li",[s._v("方案： 使用getDate()方法")])]),s._v(" "),t("ol",{attrs:{start:"6"}},[t("li",[s._v("setData过程中需要注意对象覆盖")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("a")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("b")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("c")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("d")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//会覆盖原对象b")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setData")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("b")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n        "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("c")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//解决办法1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" b "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setData")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" b "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//解决办法2: wx-update-data库")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("ol",{attrs:{start:"7"}},[t("li",[t("p",[s._v("IOS的date不支持2020-06-26格式，必须要转成2020/06/26")])]),s._v(" "),t("li",[t("p",[s._v("wx接口不promise，可使用wx-promise-pro库")])])]),s._v(" "),t("h2",{attrs:{id:"_6、小程序框架wepy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6、小程序框架wepy"}},[s._v("#")]),s._v(" 6、小程序框架wepy")]),s._v(" "),t("p",[s._v("常用框架：原生小程序、wepy(vue)、uniapp(vue)、taro(react)")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("考虑到原声api变更后，框架未及时变更情况，可使用原生小程序框架。")])]),s._v(" "),t("li",[t("p",[s._v("跨端和跨平台需求，建议使用小程序框架")])])]),s._v(" "),t("p",[s._v("wepy借鉴了vue语法功能，支持vue书写特征 - vue技术友好行")]),s._v(" "),t("h3",{attrs:{id:"_1、生命周期"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、生命周期"}},[s._v("#")]),s._v(" 1、生命周期")]),s._v(" "),t("p",[s._v("wepy生命周期同原生小程序")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("应用周期")]),s._v(" "),t("ul",[t("li",[s._v("onLaunch 首次打开")]),s._v(" "),t("li",[s._v("onShow 初始化完成")]),s._v(" "),t("li",[s._v("onHide 切换")])])]),s._v(" "),t("li",[t("p",[s._v("页面周期")]),s._v(" "),t("ul",[t("li",[s._v("onLoad 加载页面")]),s._v(" "),t("li",[s._v("onShow 前后台切换")]),s._v(" "),t("li",[s._v("onHide 前后台切换")]),s._v(" "),t("li",[s._v("onUnLoad 重定向 / 路由切换")]),s._v(" "),t("li",[s._v("onPullDownRefresh 下拉")]),s._v(" "),t("li",[s._v("onReachBottom 上拉")]),s._v(" "),t("li",[s._v("onShareAppMessage 分享")]),s._v(" "),t("li",[s._v("……")])])])]),s._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[s._v("面试题")]),s._v(" "),t("p",[s._v("1、小程序的生命周期")]),s._v(" "),t("p",[s._v("2、小程序的双线程架构")]),s._v(" "),t("ul",[t("li",[s._v("view thread + appService thread")]),s._v(" "),t("li",[s._v("notify、 sendData 对应周期")])])]),s._v(" "),t("h3",{attrs:{id:"_2、数据层-数据绑定"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、数据层-数据绑定"}},[s._v("#")]),s._v(" 2、数据层-数据绑定")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setData")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("label")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'label'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//原生小程序")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("label "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'label1'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//wepy")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ol",[t("li",[s._v("如何做到监听数据改变，多次setData时候，通信次数是一次还是几次")])]),s._v(" "),t("ul",[t("li",[s._v("在一次渲染周期内，收到多次setData的话，只会渲染一次")]),s._v(" "),t("li",[s._v("jscore -> native ->web view")])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("如何优化小程序数据通信，提升页面性能")])]),s._v(" "),t("ul",[t("li",[s._v("减少setData的调用，合并多个setData")]),s._v(" "),t("li",[s._v("与界面渲染无关的数据最好不要设置在data")]),s._v(" "),t("li",[s._v("有些数据不在页面中展示，包含复杂数据结构或者超长字符串，则不应该使用setData来设置这些数据")])]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("哪些地方可以放置无关数据")]),s._v(" "),t("li",[s._v("为什么data设置长字符串，不显示也会影响页面性能")]),s._v(" "),t("li",[s._v("wepy如何做数据绑定优化")])]),s._v(" "),t("ul",[t("li",[s._v("wepy内部实现了一个脏数据检查机制，函数执行完成之后 -> data-check")]),s._v(" "),t("li",[s._v("newValue 和 oldValue做比较，如果有变化，就会加入到readyToSet的队列中，最后统一做一个setData")]),s._v(" "),t("li",[s._v("同一时间只允许一个脏值检查流程进行")])]),s._v(" "),t("ol",{attrs:{start:"6"}},[t("li",[s._v("wepy中异步数据如何更新")])]),s._v(" "),t("h2",{attrs:{id:"_7、小程序相关面试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7、小程序相关面试"}},[s._v("#")]),s._v(" 7、小程序相关面试")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("小程序优势：无需下载安装，直接使用，运行速度快")])]),s._v(" "),t("li",[t("p",[s._v("小程序页面构成：index.js(js交互逻辑)\\index.json(页面配置)\\index.wxml(html)\\index.wxss(样式)")])]),s._v(" "),t("li",[t("p",[s._v("小程序与H5的区别：")]),s._v(" "),t("ol",[t("li",[s._v("运行环境：H5的宿主环境是浏览器，小程序基于浏览器内核重构的内置解析器，无dom、bom对象")]),s._v(" "),t("li",[s._v("系统权限：小程序能获得更多的系统权限")]),s._v(" "),t("li",[s._v("渲染机制：小程序逻辑层和渲染层是分开的，而H5页面UI渲染和js执行都是一个线程，会出现阻塞。")])])]),s._v(" "),t("li",[t("p",[s._v("小程序生命周期：")]),s._v(" "),t("ol",[t("li",[s._v("应用的生命周期\n"),t("ol",[t("li",[s._v("首次打开小程序，触发onLaunch")]),s._v(" "),t("li",[s._v("初始化完成，触发onShow方法，监听小程序显示")]),s._v(" "),t("li",[s._v("从后台进入前台，触发onShow方法")]),s._v(" "),t("li",[s._v("从前台进入后天，触发onHide方法")]),s._v(" "),t("li",[s._v("小程序后台运行一定时间，或系统资源占用过高，会被销毁")])])]),s._v(" "),t("li",[s._v("页面的生命周期\n"),t("ol",[t("li",[s._v("小程序注册完成，加载页面，触发onLoad方法")]),s._v(" "),t("li",[s._v("页面载入后触发onShow方法")]),s._v(" "),t("li",[s._v("首次显示页面，触发onReady方法，渲染页面元素和样式，一个页面只会调用一次")]),s._v(" "),t("li",[s._v("小程序由前台进入后台运行或跳转其他页面时，触发onHide方法")]),s._v(" "),t("li",[s._v("小程序由后台到前台或重新进入页面时，触发onShow方法")]),s._v(" "),t("li",[s._v("当使用重定向方法wx.redirectTo或关闭当前页面返回上一页wx.navigateBack()，触发onUnload 事件")])])])])]),s._v(" "),t("li",[t("p",[s._v("小程序的双线程架构")]),s._v(" "),t("ol",[t("li",[s._v("小程序的渲染层和逻辑层分别由2个线程管理：")])]),s._v(" "),t("ul",[t("li",[s._v("渲染层：页面渲染相关的任务全部放在webview线程里执行，一个小程序存在多个界面，所以渲染层存在多个webview线程")]),s._v(" "),t("li",[s._v("逻辑层：采用jsCore线程运行js脚本")])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("视图层和逻辑层通过系统层的WeixinJsBridge进行通信：逻辑层把数据变化通知到视图层，触发视图层面的更新，视图层把触发的事件发送给逻辑层，进行业务处理。")]),s._v(" "),t("li",[s._v("页面渲染的具体流程是：在渲染层，宿主环境会吧wxml解析程js对象，在逻辑层发生数据变更的时候，我们通过宿主环境提供的setData方法把数据从逻辑层传到渲染层，再经过对比前后的差异，把差异应用在原来的dom树上，渲染出正确的ui页面。")])])]),s._v(" "),t("li",[t("p",[s._v("小程序运行机制")]),s._v(" "),t("ol",[t("li",[s._v("热启动：用户已经打开某小程序，然后在一定时间内再次打开该小程序，此时无需重启启动，只需将后台的小程序切换到前台")]),s._v(" "),t("li",[s._v("冷启动：用户首次打开小程序或被微信主动销毁后再次打开，小程序重新加载启动。")]),s._v(" "),t("li",[s._v("销毁：只有当小程序进入后天一定时间，或者系统占用资源过高，才会被真正销毁。")])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);